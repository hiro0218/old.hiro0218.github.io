function getMarkedValue(e){return e=stripScriptTag(e),marked(e)}function keyup(e,t){t.innerHTML=getMarkedValue(e.value)}function stripScriptTag(e){for(var t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;t.test(e);)e=e.replace(t,"");return e}function monitoringKey(e){enableInsertTAB(e)}function enableInsertTAB(e){e.onkeydown=function(e){if(9===e.keyCode){var t=this.value,n=this.selectionStart,a=this.selectionEnd;return this.value=t.substring(0,n)+"	"+t.substring(a),this.selectionStart=this.selectionEnd=n+1,!1}}}function saveStorage(e){localStorage.setItem("markunVal",e.value)}function loadStorage(e){e.innerHTML=localStorage.getItem("markunVal")}function clearStorage(){localStorage.removeItem("markunVal")}window.onload=function(){"use strict";var e=document.getElementById("editor"),t=document.getElementById("result"),n=document.getElementById("modal"),a=document.getElementById("export"),r=document.getElementsByClassName("btn-save")[0],o=document.getElementsByClassName("btn-clear")[0],i=document.getElementsByClassName("btn-export")[0],l=null,u=e.value;loadStorage(e),window.setInterval(function(){saveStorage(e)},6e4),marked.setOptions({langPrefix:"language-",breaks:!0}),keyup(e,t),e.value&&keyup(e,t),e.addEventListener("focus",function(){window.clearInterval(l),l=window.setInterval(function(){var n=e.value;u!=e.value&&keyup(e,t),u=n},1e3)},!1),e.addEventListener("blur",function(){keyup(e,t)},!1),monitoringKey(e),r.addEventListener("click",function(){confirm("Save?")&&(saveStorage(e),keyup(e,t))},!1),o.addEventListener("click",function(){confirm("Clear?")&&(e.value="",clearStorage(),keyup(e,t))},!1),i.addEventListener("click",function(){a.value=getMarkedValue(e.value),n.style.display="block"},!1),a.addEventListener("focus",function(){a.select()},!1),window.addEventListener("click",function(e){e.target==n&&(n.style.display="none")},!1)};
window.onload=function(){var a=document.getElementById("editor"),c=document.getElementById("result"),b=null,d=a.value;loadStorage(a);window.setInterval(function(){saveStorage(a)},6E4);marked.setOptions({langPrefix:"language-",breaks:!0});keyup(a,c);a.value&&keyup(a,c);a.addEventListener("focus",function(){window.clearInterval(b);b=window.setInterval(function(){var b=a.value;d!=a.value&&keyup(a,c);d=b},1E3)},!1);a.addEventListener("blur",function(){keyup(a,c)},!1);monitoringKey(a)};
function keyup(a,c){var b=a.value,b=stripScriptTag(b);c.innerHTML=marked(b)}function stripScriptTag(a){for(var c=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;c.test(a);)a=a.replace(c,"");return a}function monitoringKey(a){enableInsertTAB(a)}function enableInsertTAB(a){a.onkeydown=function(a){if(9===a.keyCode){a=this.value;var b=this.selectionStart,d=this.selectionEnd;this.value=a.substring(0,b)+"\t"+a.substring(d);this.selectionStart=this.selectionEnd=b+1;return!1}}}
function saveStorage(a){localStorage.setItem("markunVal",a.value)}function loadStorage(a){a.innerHTML=localStorage.getItem("markunVal")};
